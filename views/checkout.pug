extends base 



block content

	main.med-container

		.checkout__page--headings.mrgbtm--lg 

			h2.homePage--sub-heading Checkout
			h2.homePage--sub-heading.homePage--sub-totals  Totals

		.checkout__page--grid 

			.checkout__page--items
				if cart
					each item in cart.cart
						.checkout__page--row
							.checkout__page--img-box
								img(src=`/img/product_imgs/${item.product.imageCover}`, alt="" , class='checkout__img' , width='800' , height='800')

							.checkout__page--text-box
								p.checkout__name #{item.product.name}
								p.checkout__desc Description.: #{item.product.description}
								p.checkout__col Color.: #{item.product.color}
								p.checkout__size Size: #{item.variantDetails.size}
								p.checkout__style Quantity: #{item.quantity}
								p.checkout__style Current Price: $#{item.discountPrice}
						
							.checkout__page--price-box

								p.checkout__price $ #{item.saleTotal }
								
				//-// Else block for buyitnow product
				
				else
					.checkout__page--row
						.checkout__page--img-box
							img(src=`/img/product_imgs/${product.imageCover}`, alt="" , class='checkout__img' , width='800' , height='800')

						.checkout__page--text-box
							p.checkout__name #{product.name}
							p.checkout__desc Description.: #{product.description}
							p.checkout__col Color.: #{product.color}
							p.checkout__size Size: #{variant.size}
							p.checkout__style Quantity: #{qty}
							p.checkout__style Price: $#{product.discountPrice} 
							
						.checkout__page--price-box

							p.checkout__price $ #{product.discountPrice * qty}
					

			.checkout__page--right-box

				//- // create address form	

				if !guest

					form#checkout__form--address.checkout__form--address(data-product=product ? product.id : '', data-qty=qty, data-variant=variant ? variant.id : "")
						
						- const street = defaultAddress && defaultAddress.street ? defaultAddress.street.toUpperCase() : ''
						- const city = defaultAddress && defaultAddress.city ? defaultAddress.city.toUpperCase() : ''
						- const state = defaultAddress && defaultAddress.state ? defaultAddress.state.toUpperCase() : ''
						- const postcode = defaultAddress && defaultAddress.postcode ? defaultAddress.postcode : ''
						- const number = defaultAddress && defaultAddress.number ? defaultAddress.number : ''
							p.creadit-card-address Creadit Card Payment Address Details
							.checkout__form--address-flex

								.checkout__form--address-row 
									label(for="address-label") Address Type:
									select(name="address-label" class='address-label' id='address-label' 
									data-product=JSON.stringify(product) ,  data-qty=qty,  data-variant=JSON.stringify(variant)
									)
										option(value="Home", selected=(selectedLabel === 'Home')) Home
										option(value="Work", selected=(selectedLabel === 'Work')) Work
										option(value="Other", selected=(selectedLabel === 'Other')) Other


								.checkout__form--address-row 
									label(for="address-number") Street Number
									input(
										type="number"
										id="address-number"
										name="address-number"
										autocomplete="address-number-line1"
										value=number
										required
									)

								.checkout__form--address-row 
									label(for="address-street") Street
									input(
										type="text"
										id="address-street"
										name="address-street"
										autocomplete="address-street-line2"
										value=street
										required
									)

								.checkout__form--address-row 
									label(for="address-city") City
									input(
										type="text"
										id="address-city"
										name="address-city"
										autocomplete="address-city"
										value=city
										required
									)

								.checkout__form--address-row 
									label(for="address-state") State
									input(
										type="text"
										id="address-state"
										name="address-state"
										autocomplete="address-state"
										value=state
										required
									)

								.checkout__form--address-row 
									label(for="address-postcode") Postcode
									input(
										type="text"
										id="address-postcode"
										name="address-postcode"
										autocomplete="address-postcode"
										value=postcode
										minlength="4"
										maxlength="4"
										required
									)


							.checkout__page--totals

								.checkout__page--totals--row
									p.checkout__page--totals-p SubTotal:
									p.checkout__page--totals-p $#{totalNet}

								.checkout__page--totals--row
									p.checkout__page--totals-p Delivery:
									p.checkout__page--totals-p $#{delivery}

								.checkout__page--totals--row
									p.checkout__page--totals-p GST: 
									p.checkout__page--totals-p $ #{taxes}

								.checkout__page--totals--row
									p.checkout__page--totals-p Estimated Total: 
									p.checkout__page--totals-p $#{totalGross}
									

								button#checkout-submit--stripe(class='checkout__page-submit--btn') Pay with Card
								
						#paypal-button-container(
							data-product=(product && product.id) || ''
							data-qty=qty || ''
							data-variant=(variant && variant.id) || ''
						)
				else 
				
					form#checkout__form--address-guest.checkout__form--address(data-product=product ? product.id : '', data-qty=qty, data-variant=variant ? variant.id : "")
					
							p.creadit-card-address Customer Order Details	
												
							.checkout__form--address-flex
							
								.checkout__form--address-row 
									label(for="address-email") Email:
									input(type="email" id='address-email' name='address-email')
							
								.checkout__form--address-row 
									label(for="address-name") Name:
									input(type="text" id='address-name' name='address-name')
	


								.checkout__form--address-row 
									label(for="address-number") Street Number
									input(
										type="number"
										id="address-number"
										name="address-number"
										required
									)

								.checkout__form--address-row 
									label(for="address-street") Street
									input(
										type="text"
										id="address-street"
										name="address-street"
										required
									)

								.checkout__form--address-row 
									label(for="address-city") City
									input(
										type="text"
										id="address-city"
										name="address-city"
										required
									)

								.checkout__form--address-row 
									label(for="address-state") State
									input(
										type="text"
										id="address-state"
										name="address-state"
										required
									)

								.checkout__form--address-row 
									label(for="address-postcode") Postcode
									input(
										type="text"
										id="address-postcode"
										name="address-postcode"
										minlength="4"
										maxlength="4"
										required
									)


							.checkout__page--totals

								.checkout__page--totals--row
									p.checkout__page--totals-p SubTotal:
									p.checkout__page--totals-p $#{totalNet}

								.checkout__page--totals--row
									p.checkout__page--totals-p Delivery:
									p.checkout__page--totals-p $#{delivery}

								.checkout__page--totals--row
									p.checkout__page--totals-p GST: 
									p.checkout__page--totals-p $ #{taxes}

								.checkout__page--totals--row
									p.checkout__page--totals-p Estimated Total: 
									p.checkout__page--totals-p $#{totalGross}
									

								button#checkout-submit--stripe-guest(class='checkout__page-submit--btn') Pay with Card
							
							#paypal-button-container-guest(
								data-product=(product && product.id) || ''
								data-qty=qty || ''
								data-variant=(variant && variant.id) || ''
							)

				script(src=`https://www.paypal.com/sdk/js?client-id=${paypalClientId}&currency=AUD`)
				script(src="/js/paypal.js")